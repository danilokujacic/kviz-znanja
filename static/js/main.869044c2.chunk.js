(this.webpackJsonpquizz=this.webpackJsonpquizz||[]).push([[0],{23:function(e,t,n){e.exports=n.p+"static/media/geography.3e78c53f.png"},24:function(e,t,n){e.exports=n.p+"static/media/history.5a99e060.jpg"},25:function(e,t,n){e.exports=n.p+"static/media/social.8c6b6452.png"},26:function(e,t,n){e.exports=n.p+"static/media/music.1376d7e4.jpg"},28:function(e,t,n){e.exports=n.p+"static/media/loading.aa275084.gif"},29:function(e,t,n){e.exports=n.p+"static/media/not-found.616bc31c.png"},30:function(e,t,n){e.exports=n(58)},35:function(e,t,n){},36:function(e,t,n){},37:function(e,t,n){},38:function(e,t,n){},44:function(e,t,n){},46:function(e,t,n){},47:function(e,t,n){},48:function(e,t,n){},49:function(e,t,n){},50:function(e,t,n){},51:function(e,t,n){},58:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(12),o=(n(35),n(36),n(37),n(38),n(2)),s=n(4),i=n.n(s),u=n(9),l=n(3),m=n(23),p=n.n(m),f=n(24),d=n.n(f),E=n(25),h=n.n(E),b=n(26),g=n.n(b),v=[{name:"Geography",image:p.a},{name:"History",image:d.a},{name:"Social",image:h.a},{name:"Music",image:g.a}],j=[{question:"RARARA",answers:[{answer:"Yea",correct:!0},{answer:"Yea",correct:!0},{answer:"Yea",correct:!0},{answer:"Yea",correct:!0}]}],O=n(5),y=n(1),S=n(6),N=(n(44),Object(O.b)((function(e,t){return{user:e.user,quiz:e.quiz}}),(function(e){return{goBack:function(){return e({type:"FINISH_QUIZ"})},removeUser:function(){return e({type:"REMOVE_USER"})}}}))((function(e){var t=e.user,n=e.quiz,a=e.goBack,c=(e.back,e.removeUser),o=Object(y.g)();return r.a.createElement("div",{className:"header"},r.a.createElement("div",{className:"user-header-text"},r.a.createElement(S.a,{className:"link-to-home",to:"/"},"Home"),t?n?r.a.createElement("span",{style:{cursor:"pointer"},onClick:function(){o.goBack(),a()}},"Go back"):r.a.createElement("span",null,"Hello ",t.name,",",t.points," points"):r.a.createElement("span",null,"Hello there, guest!")),t?r.a.createElement("div",{className:"login-register"},r.a.createElement(S.a,{to:"/list"},"List"),r.a.createElement(S.a,{onClick:function(){sessionStorage.removeItem("user_token"),c(),o.push("/")},to:"/"},"Logout")):r.a.createElement("div",{className:"login-register"},r.a.createElement(S.a,{to:"/login"},"Login"),r.a.createElement(S.a,{to:"/register"},"Register")))}))),k=(n(46),function(){return r.a.createElement("div",{className:"start-quiz"},r.a.createElement(S.a,{to:"/choose-quiz"},"Start"))}),w=(n(47),Object(O.b)((function(){return{}}),(function(e){return{activateQuiz:function(){return e({type:"START_QUIZ"})}}}))((function(e){var t=e.activateQuiz,n=r.a.useState(),a=Object(l.a)(n,2),c=a[0],o=a[1],s=function(){return o(v)};return r.a.useEffect((function(){setTimeout(s,50)}),[]),r.a.createElement("div",{className:"quiz-selection"},c&&c.map((function(e,n){return r.a.createElement("div",{key:n,style:{backgroundImage:"url(".concat(e.image,")"),animation:"roll-in 0.5s ease-in forwards ".concat(n/4,"s")},className:"quiz quiz-animate"},r.a.createElement(S.a,{onClick:function(){return t()},className:"quiz-title",style:{zIndex:1},to:{pathname:"/quiz/".concat(e.name),state:{auth:!0}}},r.a.createElement("span",null,e.name)))})))}))),_=n(28),z=n.n(_),x=function(){return r.a.createElement("div",{className:"loading"},r.a.createElement("div",null,r.a.createElement("img",{src:z.a,alt:"Loading turtle"})),r.a.createElement("div",{className:"loading-text"},"Loading, please wait..."))},I=function(e){var t=e.label,n=e.action,a=e.style,c=e.type,s=e.disabled;return r.a.createElement("button",{className:"button",type:c||"button",disabled:Boolean(s),style:Object(o.a)({},a),onClick:function(){return n?n():{}}},t)},A=function(e){var t=e.children,n=e.className;return r.a.createElement("div",{className:"wrapper ".concat(n||"")},t)},T=function(e){var t=e.name,n=e.setStarted,a=r.a.useState(!1),c=Object(l.a)(a,2),o=c[0],s=c[1];return r.a.createElement(A,{className:"intro-div"},r.a.createElement("p",null,"Pozdrav ratnice, izabrao si kviz"," ",r.a.createElement("span",{style:{color:"#b39ddb"}},t," "),","),r.a.createElement("p",null,"Pravila kviza su sledeca: ",r.a.createElement("br",null),r.a.createElement("ul",null,r.a.createElement("li",null,"Za svako promaseno pitanje gubis 3 poena"),r.a.createElement("li",null,"Za svako pogodjeno pitanje dobijas 5 poena"),r.a.createElement("li",null,"Kviz mozes da napusits kad oces, ali u tom slucaju gubis prethodno steknute poene"),r.a.createElement("li",null,"Poeni ti se sabiraju na kraju (racunajuci i izgubljene poene) i dodaju na tvom profilu"),r.a.createElement("li",null,"Nemoj da varas!"))),r.a.createElement("p",null,r.a.createElement("input",{type:"checkbox",checked:o,onChange:function(){return s(!o)}})," ",r.a.createElement("span",null,"Procitao sam sve i spreman sam da pocnem"),r.a.createElement("br",null),r.a.createElement(I,{label:"Zapocni kviz",disabled:!o,action:function(){return n()}})))},U=Object(O.b)((function(e){return{user:e.user}}),(function(e){return{setUser:function(t){return e({type:"SET_USER",payload:Object(o.a)({},t)})},setQuiz:function(){e({type:"FINISH_QUIZ"})}}}))((function(e){var t=e.achievedPoints,n=e.user,a=e.setQuiz,c=e.setUser;r.a.useEffect((function(){fetch("http://localhost:3000/update",{method:"PUT",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json",Authorization:"Bearer "+sessionStorage.getItem("user_token")},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify({points:t})}).then((function(e){return e.json()})).then((function(e){c({name:e.user,points:e.points}),a()}))}),[]);var o,s=Object(y.g)();return r.a.createElement(A,{className:"intro-div"},r.a.createElement("h1",null,"Igra zavrsena!"),r.a.createElement("span",null,"Svaka cast ",n.name,", uspio si da zaradis: ",t," ",(o=t)>1||0===o?"poena":"poen"),r.a.createElement("div",{className:"stats"},"User points: ",n.points-t,r.a.createElement("br",null),"Earned points: ",t,r.a.createElement("div",{className:"conclude"},"Tvoj broj poena sad ",n.points)),r.a.createElement("div",null,r.a.createElement(I,{style:{marginTop:"16px"},label:"Go home",action:function(){return s.push("/")}})))})),R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{processAnswer:!1,initLoading:!1,gameStarted:!1,gameFinished:!1},t=arguments.length>1?arguments[1]:void 0,n=t.type;t.payload;return"SET_LOADING"===n?Object(o.a)({},e,{initLoading:!0}):"FINISH_LOADING"===n?Object(o.a)({},e,{initLoading:!1}):"FINISH_GAME"===n?Object(o.a)({},e,{gameFinished:!0}):"RESET_LOADING"===n?Object(o.a)({},e,{initLoading:!1}):"START_QUIZ"===n?Object(o.a)({},e,{gameStarted:!0}):e},C=Object(O.b)((function(e){return{quiz:e.quiz}}),(function(e){return{setUser:function(t){return e({type:"SET_USER",payload:Object(o.a)({},t)})},setQuiz:function(){e({type:"FINISH_QUIZ"})}}}))((function(e){var t=e.quiz,n=(e.setUser,e.setQuiz,Object(y.h)()),c=Object(y.g)(),o=Object(a.useReducer)(R,{processAnswer:!1,initLoading:!1,gameStarted:!1,gameFinished:!1}),s=Object(l.a)(o,2),m=s[0],p=s[1],f=Object(a.useState)(),d=Object(l.a)(f,2),E=d[0],h=d[1],b=Object(a.useState)(0),g=Object(l.a)(b,2),v=g[0],j=g[1],O=Object(a.useState)(0),S=Object(l.a)(O,2),N=S[0],k=S[1];r.a.useEffect((function(){if(!1===t)return c.push("/");(function(){var e=Object(u.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:3000/quiz/"+n.component.toLowerCase()).then((function(e){return e.json()}));case 2:t=e.sent,h(t.questions);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var w=function(){var e=Object(u.a)(i.a.mark((function e(t,n){var a,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=document.querySelectorAll(".answers div"),t.correct?(a[n].classList.add("correct"),k(N+=5)):(k(N-=3),E&&E[v]&&E[v].answers&&(r=E[v].answers.findIndex((function(e){return!0===e.correct})),a[r].classList.add("correct")),a[n].classList.add("wrong")),p({type:"SET_LOADING"}),e.next=5,new Promise((function(e){return setTimeout((function(){return e(p({type:"FINISH_LOADING"}))}),3e3)}));case 5:E&&!E[v+1]?p({type:"FINISH_GAME"}):(a.forEach((function(e){e.classList.remove("correct"),e.classList.remove("wrong")})),j(v+1));case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return m.gameFinished?r.a.createElement(U,{achievedPoints:N}):m.gameStarted?r.a.createElement(r.a.Fragment,null,E?E[v]?r.a.createElement("div",{className:"question-div"},m.initLoading?r.a.createElement("div",{className:"quiz-alert"},"Procesuiram sledece pitanje..."):null,r.a.createElement("div",{className:"questions"},r.a.createElement("div",{className:"question"},E[v].question),r.a.createElement("div",{className:"answers"},E[v].answers.map((function(e,t){return r.a.createElement("div",{onClick:function(){w(e,t)},key:t},e.answer)}))))):r.a.createElement("div",null,"No more questions for you bro!"):r.a.createElement(x,null)):r.a.createElement(T,{name:n.component,setStarted:function(){return p({type:"START_QUIZ"})}})})),q=(n(48),Object(O.b)((function(e){return{usr:e.user}}))((function(e){var t=e.usr,n=r.a.useState(),c=Object(l.a)(n,2),o=c[0],s=c[1],i=Object(y.g)();Object(a.useEffect)((function(){fetch("http://localhost:3000/getList").then((function(e){return e.json()})).then((function(e){return s(e.data)}))}),[]);var u=function(e){i.push("/user/"+e)},m=function(e){e.preventDefault()};return t&&o?r.a.createElement(A,{className:"intro-div"},r.a.createElement("table",{className:"table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Points"))),r.a.createElement("tbody",null,o.map((function(e,n){return e.name===t.name?r.a.createElement(r.a.Fragment,{key:n},r.a.createElement("tr",{className:"table-row",onContextMenu:m,onClick:function(){return u(e.name)},key:n},r.a.createElement("td",{style:{color:"yellow"}},e.name),r.a.createElement("td",null,e.points))):r.a.createElement("tr",{onContextMenu:m,className:"table-row",onClick:function(){return u(e.name)},key:n},r.a.createElement("td",null,e.name),r.a.createElement("td",null,e.points))}))))):r.a.createElement(x,null)}))),L=function(){var e=Object(y.h)().name,t=Object(y.g)(),n=r.a.useState(),a=Object(l.a)(n,2),c=a[0],o=a[1];return r.a.useEffect((function(){fetch("http://localhost:3000/getUser?name="+e).then((function(e){return e.json()})).then((function(e){return o(e)}))}),[]),c?r.a.createElement(A,null,r.a.createElement("div",{className:"head-user"},c.name),r.a.createElement("div",null,r.a.createElement("ul",{className:"user-list"},r.a.createElement("li",null,"Name: ",c.name),r.a.createElement("li",null,"Points: ",c.points))),r.a.createElement("div",null,r.a.createElement(I,{action:function(){t.push("/list")},label:"Return"}))):r.a.createElement("h1",null,"Loading")},P=n(29),H=n.n(P),G=(n(49),function(){return r.a.createElement(A,null,r.a.createElement("div",{className:"image"},r.a.createElement("img",{src:H.a,alt:"Not found"})),r.a.createElement("div",{className:"text-message"},"Oprosti, ali ova stranica ne postoji na nasem sajtu,vrati se na"," ",r.a.createElement(S.a,{className:"link",to:"/"},"Home")))}),F=(n(50),function(e){var t=e.message,n=e.inSide,c=e.setAlert,o=r.a.useState(!1),s=Object(l.a)(o,2),m=s[0],p=s[1];return r.a.useEffect((function(){n&&(p(!0),setTimeout((function(){(function(){var e=Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(!1),e.next=3,new Promise((function(e){return setTimeout(e,250)}));case 3:c(!1);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),3e3))}),[n]),r.a.createElement(a.Fragment,null,n&&r.a.createElement("div",{style:{top:n?"initial":"-100px",animation:"".concat(m?"slide-in":"slide-out"," 0.5s cubic-bezier(0.445, 0.05, 0.55, 0.95)")},className:"alert-box"},t))}),D=(n(51),n(52),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{username:"",password:""},t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;return"CHANGE_USERNAME"===n?Object(o.a)({},e,{username:a}):"CHANGE_PASSWORD"===n?Object(o.a)({},e,{password:a}):e}),Q=Object(O.b)((function(e,t){return{user:e.user}}),(function(e){return{setUser:function(t){return e({type:"SET_USER",payload:Object(o.a)({},t)})}}}))((function(e){var t=e.user,n=e.setUser,c=Object(y.g)();r.a.useEffect((function(){t&&c.push("/")}),[]);var o=Object(a.useReducer)(D,{username:"",password:""}),s=Object(l.a)(o,2),m=s[0],p=s[1],f=function(){var e=Object(u.a)(i.a.mark((function e(t){var a,r,o,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),console.log(Object({NODE_ENV:"production",PUBLIC_URL:"/kviz-znanja",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).API_HOST),e.next=4,fetch("http://localhost:3000/login",{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(m)}).then((function(e){return e.json()}));case 4:(a=e.sent).name&&(r=a.status,o=a.name,s=a.points,"Logged in"===r&&(sessionStorage.setItem("user_token",a.token),n({name:o,points:s}),c.push("/")));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(A,{className:"login-div"},r.a.createElement("form",{onSubmit:f},r.a.createElement("div",null,r.a.createElement("label",null,"Username"),r.a.createElement("input",{type:"text",onChange:function(e){p({type:"CHANGE_USERNAME",payload:e.target.value})}})),r.a.createElement("div",null,r.a.createElement("label",null,"Login"),r.a.createElement("input",{type:"password",onChange:function(e){p({type:"CHANGE_PASSWORD",payload:e.target.value})}})),r.a.createElement("div",null,r.a.createElement(I,{style:{margin:"auto"},label:"Login",type:"submit"}))))})),M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{username:"",password:""},t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;return"CHANGE_USERNAME"===n?Object(o.a)({},e,{username:a}):"CHANGE_PASSWORD"===n?Object(o.a)({},e,{password:a}):e},Z=Object(O.b)((function(e,t){return{user:e.user}}),(function(e){return{setUser:function(t){return e({type:"SET_USER",payload:Object(o.a)({},t)})}}}))((function(e){var t=e.user,n=e.setUser,c=Object(y.g)();r.a.useEffect((function(){t&&c.push("/")}),[]);var s=Object(a.useReducer)(M,{username:"",password:""}),m=Object(l.a)(s,2),p=m[0],f=m[1],d=function(){var e=Object(u.a)(i.a.mark((function e(t){var a,r,s,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,fetch("http://localhost:3000/register",{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(Object(o.a)({},p,{points:0}))}).then((function(e){return e.json()}));case 3:(a=e.sent).name&&(r=a.status,s=a.name,u=a.points,"Logged in"===r&&(sessionStorage.setItem("user_token",a.token),n({name:s,points:u}),c.push("/")));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(A,{className:"login-div"},r.a.createElement("form",{onSubmit:d},r.a.createElement("div",null,r.a.createElement("label",null,"Username"),r.a.createElement("input",{type:"text",onChange:function(e){f({type:"CHANGE_USERNAME",payload:e.target.value})}})),r.a.createElement("div",null,r.a.createElement("label",null,"Password"),r.a.createElement("input",{type:"password",onChange:function(e){f({type:"CHANGE_PASSWORD",payload:e.target.value})}})),r.a.createElement("div",null,r.a.createElement(I,{style:{margin:"8px 0px"},type:"submit",label:"Register"}),r.a.createElement(I,{type:"reset",label:"Reset"}))))})),B=Object(O.b)((function(e){return{user:e.user}}),(function(e){return{setUser:function(t){return e({type:"SET_USER",payload:Object(o.a)({},t)})}}}))((function(e){e.user;var t=e.setUser,n=Object(a.useState)(),c=Object(l.a)(n,2)[1],o=Object(a.useState)(!1),s=Object(l.a)(o,2),m=s[0],p=s[1],f=Object(a.useState)(!1),d=Object(l.a)(f,2),E=d[0],h=d[1],b=Object(y.g)();return Object(a.useEffect)((function(){if(b.listen((function(e){if("/"!==e.pathname&&"/login"!==e.pathname&&"/register"!==e.pathname)if(sessionStorage.getItem("user_token")){function t(){return(t=Object(u.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:3000/verify",{method:"POST",headers:{"Content-type":"application/json",Authorization:"Bearer "+sessionStorage.getItem("user_token")}}).then((function(e){return e.json()})).then((function(e){return e}));case 2:(t=e.sent).status&&"Approved"===t.status||(b.push("/"),m||p(!0));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}else b.push("/"),m||p(!0);"/"!==e.pathname?h(!0):h(!1)})),sessionStorage.getItem("user_token")){function e(){return(e=Object(u.a)(i.a.mark((function e(){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:3000/verify",{method:"POST",headers:{"Content-type":"application/json",Authorization:"Bearer "+sessionStorage.getItem("user_token")}}).then((function(e){return e.json()})).then((function(e){return e}));case 2:"Approved"===(n=e.sent).status?(console.log(n),t({name:n.name,points:n.points})):"/login"!==b.location.pathname&&b.push("/");case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}else"/login"!==b.location.pathname&&"/register"!==b.location.pathname&&b.push("/");setTimeout((function(){c(j)}),50)}),[]),r.a.createElement(a.Fragment,null,r.a.createElement(a.Fragment,null,r.a.createElement(F,{setAlert:p,inSide:m,message:"You must register/login to proceed"}),r.a.createElement(N,{back:E}),r.a.createElement(y.d,null,r.a.createElement(y.b,{defaultPath:!0,exact:!0,path:"/"},r.a.createElement(k,null)),r.a.createElement(y.b,{exact:!0,path:"/choose-quiz"},r.a.createElement(w,null)),r.a.createElement(y.b,{exact:!0,path:"/login"},r.a.createElement(Q,null)),r.a.createElement(y.b,{exact:!0,path:"/list"},r.a.createElement(q,null)),r.a.createElement(y.b,{exact:!0,path:"/register"},r.a.createElement(Z,null)),r.a.createElement(y.b,{exact:!0,path:"/user/:name"},r.a.createElement(L,null)),r.a.createElement(y.b,{exact:!0,path:"/quiz/:component"},r.a.createElement(C,null)),r.a.createElement(y.b,{exact:!0,path:"/not-found"},r.a.createElement(G,null)),r.a.createElement(y.a,{to:"/not-found"}))))})),W=n(7),J=n(14),Y={user:null,quiz:!1},K=Object(J.b)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;return"START_QUIZ"===n?Object(o.a)({},e,{quiz:!0}):"FINISH_QUIZ"===n?Object(o.a)({},e,{quiz:!1}):"REMOVE_USER"===n?Object(o.a)({},e,{user:null}):"SET_USER"===n?Object(o.a)({},e,{user:Object(o.a)({},a)}):e})),V=Object(W.a)();Object(c.render)(r.a.createElement(y.c,{history:V},r.a.createElement(O.a,{store:K},r.a.createElement(B,null))),document.getElementById("root"))}},[[30,1,2]]]);
//# sourceMappingURL=main.869044c2.chunk.js.map